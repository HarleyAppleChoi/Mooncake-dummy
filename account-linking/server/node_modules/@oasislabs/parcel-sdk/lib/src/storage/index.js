"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const readable_stream_1 = require("readable-stream");
var gcp_1 = require("./gcp");
exports.GCPStorage = gcp_1.GCPStorage;
var parcel_1 = require("./parcel");
exports.ParcelStorage = parcel_1.ParcelStorage;
var s3_1 = require("./s3");
exports.S3Storage = s3_1.S3Storage;
/** A `Transform` stream that accumulates the size of the chunks it receives. */
class FileSizerTransform extends readable_stream_1.Transform {
    constructor() {
        super(...arguments);
        this.fileSize = BigInt(0);
    }
    _transform(chunk, _enc, cb) {
        this.fileSize += BigInt(chunk.length);
        cb(undefined, chunk);
    }
    currentFileSize() {
        return this.fileSize;
    }
}
exports.FileSizerTransform = FileSizerTransform;
//# sourceMappingURL=index.js.map